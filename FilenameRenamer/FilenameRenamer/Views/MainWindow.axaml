<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:FilenameRenamer.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:models="clr-namespace:FilenameRenamer.Models"
        xmlns:io="clr-namespace:System.IO;assembly=System.IO.FileSystem"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="FilenameRenamer.Views.MainWindow"
        Icon="/Assets/avalonia-logo.ico"
        Title="Filename Renamer"
        Background="#99000000"
        TransparencyLevelHint="AcrylicBlur"
        >

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Border  CornerRadius="10" >
        <Grid>
        <Grid.ColumnDefinitions>
			<ColumnDefinition Width="1*" />
			<ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="1*" />
		</Grid.RowDefinitions>
		<Panel Grid.Column="0" Background="Transparent">
            <Grid Margin="3">
                <Grid.RowDefinitions>
                    <RowDefinition Height="10*"/>
                    <RowDefinition Height="1*"/>
                </Grid.RowDefinitions>
                <TreeView Padding="8" Grid.Row="0" Items="{Binding GraphicalFileList}">
                    <TreeView.DataTemplates>
                        <TreeDataTemplate DataType="models:DirectoryItem" ItemsSource="{Binding FileInfos}">
							<Border Padding="4">
                                <StackPanel Orientation="Horizontal">
                                    <Image></Image>
                                    <TextBlock Text="{Binding DirectoryName}"></TextBlock>
                                    <TextBlock Text="{Binding FileInfos.Count, StringFormat=' ({0} files)'}"></TextBlock>
                                </StackPanel>
							</Border>
						</TreeDataTemplate>
                        <DataTemplate DataType="io:FileInfo">
                            <Border Padding="4">
                                <StackPanel Orientation="Horizontal">
                                    <Image></Image>
                                    <TextBlock Text="{Binding Name}"></TextBlock>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </TreeView.DataTemplates>
                </TreeView>
                <StackPanel HorizontalAlignment="Center" Grid.Row="1" Orientation="Horizontal" Spacing="8">
                    <Button Command="{Binding SelectFile}">+</Button>
                    <Button Command="{Binding DiscardFile}">-</Button>
                    <Button Command="{Binding DiscardAll}">Discard all</Button>
                    <Button Command="{Binding OpenFolder}">Open Folder</Button>
                </StackPanel>
            </Grid>
        </Panel>
		<Panel Grid.Column="1" Background="#99000000">
            <Grid Margin="20,5,20,5">
                <Grid.ColumnDefinitions>
				<ColumnDefinition Width="1*" />
			</Grid.ColumnDefinitions>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="1*" />
			</Grid.RowDefinitions>
			<Grid Grid.Row="0">
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Grid.Column="0" VerticalAlignment="Center" Text="{Binding NewName}"></TextBox>
                    <Button Grid.Column="1" 
                            VerticalAlignment="Stretch"
                            Command="{Binding ClearNewName}">
                        x
                    </Button>
				</Grid>
                <StackPanel Margin="3" HorizontalAlignment="Center" Grid.Row="1" Orientation="Horizontal" Spacing="8">
					<TextBlock VerticalAlignment="Center">Insert:</TextBlock>
					<Button Command="{Binding AddLastModifiedDate}">Last modified date</Button>
					<Button Command="{Binding AddCurrentFilename}">Current filename</Button>
					<Button>Yes</Button>
					<Button>Yes</Button>
				</StackPanel>
			</Grid>
			<StackPanel Grid.Row="1" VerticalAlignment="Top" Orientation="Vertical" Spacing="8">
				<CheckBox>Random checkbox 1</CheckBox>
				<CheckBox>Custom date format</CheckBox>
				<CheckBox>Find and replace</CheckBox>
                <CheckBox IsChecked="{Binding CopyFilesOptionOn}">Copy files to new directory (keep old files and old names in current directory)</CheckBox>
				<StackPanel IsVisible="{Binding CopyFilesOptionOn}" Orientation="Horizontal">
                    <TextBox></TextBox>
					<Button>Select folder</Button>
                </StackPanel>
            </StackPanel>
				<Grid VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding CurrentProgress}"></TextBlock>
                    <ProgressBar IsIndeterminate="True" IsVisible="{Binding }"></ProgressBar>
                    <Button Grid.Column="1"
                            HorizontalAlignment="Right"
                            Command="{Binding ApplyButtonClick}">
                        Apply
                    </Button>
                </Grid>
            </Grid>
        </Panel>
    </Grid>
    </Border>
</Window>
